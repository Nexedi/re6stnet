OPTIONS : RES6NET
    usage : ./re6stnet.py [options...]
    --ip address port proto
            Specify connection information to be advertised to other nodes.
            address MUST be a ipv4 address since as of now openvpn does not
            support ipv6 addresses.
            Proto should be either udp or tcp-client

    -i, --interface interface
            Give one interface name for each use of the argument. The interface
            will be used to detect other nodes on the local network.

    --peers-db-refresh duration
            Duration in seconds of the peers DB refresh interval.
            Default : 3600  ( 1 hour )

    -l, --log directory
            Path to the directory used for log files. Will create one file
            for babel logging and one file for each openvpn server and client
            started.
            Default : /var/log

    -s, --state directory
            Path to the directory used for state files. State files include :
            - peers.db : the peers db used to establish connection
            - re6stnet.babeld.state : babeld state file ( created if does not
              exists, overriden if exists )
              There must be a valid peers db file ( named peers.db ) in the
              directory. A valid peers db file can be created with setup.py
            Default : /var/lib/re6stnet

    -v, --verbose level
            Defines the verbose level, level should be an integer between 0
            and 3 ( including ). There is no precise convention for verbode
            level for now, except an increased number means more log messages.
            This parameter is also given to babel for its log.
            To adjust verbose level for openvpn, add an openvpn optional
            arguments at the end of the command line
            Default : 0

    --registry address
           Complete public ( reachable from the internet ) address of the machine
           running a registry. Will be used to get the pirvate address of the
           registry and/or bootstrap peers
           Examples : http://192.0.2.42:80, http://[2001:db8:42::1]:80

    --hello duration
            Set hello interval, in seconds, for both wired and wireless
            connections. Openvpn ping-exit option is set to 4 times the hello
            interval. Argument passed down to the babel daemon, equivalent
            to :
            -h duration -H duration
            in babeld ( for more information, see babeld man page )
            It takes between 3 times and 4 times the hello interval for babel
            to re-establish connection with a node for which the direct
            connection has been cut
            Default : 15

    -w, --wireless
            Consider all interfaces as being wireless interfaces. Argument
            directly passed down to the babeld daemon

    --pp port proto
            Port and protocol used by the openvpn server(s). Start one openvpn
            server for each couple port/protocol specified.
            Additionally, if no external configuration is given in the command
            line, re6stnet will attempt to forward a port with upnp for each
            couple port/proto given.
            Protocols should be either udp or tcp-server.
            Default : (1194, udp), (1194, tcp-server)

    --tunnel-refresh duration
            Interval in seconds between two tunnel refresh. Refreshing tunnels
            mean :
            - killing all dead tunnels ( detected via the ping-exit option
              if openvpn )
            - killing the 'worst' tunnels, so that at least the ratio of
              tunnels set by the --refresh-rate option have been killed
            - creating new tunnels to other clients randomly choosen in the
              peers database, to reach the number of connection specified by
              the connection-count option ( There can be less tunnels if the
              peers DB does not contain enough peers )
            Default : 300

    --dh path
            Path to the dh file to be used by the openvpn server
            (for more information see the openvpn man page)

    --ca path
            Path to the certificate authority file delivered by the re6stnet
            server. The prefix of the VPN network is included in the serial
            number of the file.

    --cert path
            Path to the individual certificate file delivered by the re6stnet
            server. The prefix of the machine is included in the certificate's
            subject common name.

    --connection-count number
            The maximum number of openvpn clients to start.
            Default : 20

    --refresh-rate ratio
            The ratio of connection to kill each time we refresh tunnels.
            For more information see the --tunnel-refresh option
            ratio should be a float between 0 and 1 ( included )
            Default : 0.05

    openvpn_args
            Additional arguments to be passed down to all openvpn processes
            can be given at the end of the command line.
            In that case, insert '--' to delimit re6stnet regular options
            from the additional openvpn arguments. The list of arguments will
            be passed down to ALL openvpn processes ( including servers )
            exactly as they are given
            One SHOULD give a --key argument with the key file delivered by the
            re6stnet server

    @file
            You can give to re6stnet a config file as a regular argument
            (meaning before giving optional openvpn arguments)
            The file should contain one option per line, possibly ommitting
            the '--'. Only long option are allowed (i.e "v 3" will not work
            while "verbose 3" will)
            You can give a file ( with the @ prefix ) as an argument within a
            file


If you are using a version of python < 2.7.3-2, then you should include this at
the beggining of registry.py

--------------------------------------------------------------------------------
# Fix for librpcxml to avoid doing reverse dns on each request
# it was causing a 10s delay on each request when no reverse DNS was avalaible
import BaseHTTPServer


def not_insane_address_string(self):
    host, port = self.client_address[:2]
    return '%s (reverse DNS disabled)' % host  # used to call: socket.getfqdn(host)

BaseHTTPServer.BaseHTTPRequestHandler.address_string = not_insane_address_string

--------------------------------------------------------------------------------
