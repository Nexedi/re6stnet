==========
 re6stnet
==========

---------------------------------------------
Resilient, Scalable, IPv6 Network application
---------------------------------------------

:Author: Nexedi
:Manual section: 1

SYNOPSIS
========

``re6stnet`` ``--registry`` `registry-url` ``--dh`` `dh-path`
             ``--ca`` `ca-path` ``--cert`` `cert-path`
             ``--key`` `key-path` [`options`...] [``--`` [`openvpn-options`...]]

DESCRIPTION
===========

re6stnet is a client connecting to the re6st network. It establishes connections
with other nodes and create a resilient network, whose nodes all have ipv6
addresses. The goal of re6stnet is to create very large networks, guaranteeing
bandwidth between nodes and giving ipv6 to computers.

USAGE
=====

re6stnet needs information about certificates to start, as they contain data
about the network and the ipv6 address of the node. These certificates can be
obtained with the re6st-conf tool.

--registry address
           Complete public ( reachable from the internet ) address of the machine
           running a registry. Will be used to get the pirvate address of the
           registry and/or bootstrap peers
           Examples : http://192.0.2.42:80, http://[2001:db8:42::1]:80

--dh path
            Path to the dh file to be used by the openvpn server
            (for more information see the openvpn man page)

--ca path
            Path to the certificate authority file delivered by the re6stnet
            server. The prefix of the re6st network is included in the serial
            number of the file.

--cert path
            Path to the individual certificate file delivered by the re6stnet
            server. The prefix of the machine's re6stnet ip is included in the
            certificate's subject common name.

--key path
            Path to the private key file generated by the re6st-conf tool.

Options
-------

-h, --help  Display a summary help about the options

@file
            You can give to re6stnet a config file as a regular argument
            (meaning before giving optional openvpn arguments)
            The file should contain one option per line, possibly ommitting
            the '--'. Only long option are allowed (i.e "v 3" will not work
            while "verbose 3" will)
            You can give a file ( with the @ prefix ) as an argument within a
            file ( since it is an optioin, it must be alone on the line ).

--ip address port proto
            Specify connection information to be advertised to other nodes.
            address MUST be a ipv4 address since as of now openvpn does not
            support ipv6 addresses.
            Proto should be either udp or tcp-client

-i, ``--interface`` `interface`
            Give one interface name for each use of the argument. The interface
            will be used to detect other nodes on the local network.

--peers-db-refresh duration
            Duration in seconds of the peers DB refresh interval.
            Default : 3600  ( 1 hour )

-l, ``--log`` `directory`
            Path to the directory used for log files. Will create one file
            for babel logging and one file for each openvpn server and client
            started.
            Default : /var/log

-s, ``--state`` `directory`
            Path to the directory used for state files. State files include :
            - peers.db : the peers db used to establish connection ( created
            if does not exists )
            - re6stnet.babeld.state : babeld state file ( created if does not
            exists, overriden if exists )
            Default : /var/lib/re6stnet

-v, ``--verbose`` `level`
            Defines the verbose level, level should be an integer between 0
            and 3 ( including ). There is no precise convention for verbode
            level for now, except an increased number means more log messages.
            This parameter is also given to babel for its log.
            To adjust verbose level for openvpn, add an openvpn optional
            arguments at the end of the command line
            Default : 0

--hello duration
            Set hello interval, in seconds, for both wired and wireless
            connections. Openvpn ping-exit option is set to 4 times the hello
            interval. Argument passed down to the babel daemon, equivalent
            to :
            -h duration -H duration
            in babeld ( for more information, see babeld man page )
            It takes between 3 times and 4 times the hello interval for babel
            to re-establish connection with a node for which the direct
            connection has been cut
            Default : 15

-w, --wireless
            Consider all interfaces as being wireless interfaces. Argument
            directly passed down to the babeld daemon

--pp port proto
            Port and protocol used by the openvpn server(s). Start one openvpn
            server for each couple port/protocol specified.
            Additionally, if no external configuration is given in the command
            line, re6stnet will attempt to forward a port with upnp for each
            couple port/proto given.
            Protocols should be either udp or tcp-server.
            Default : (1194, udp), (1194, tcp-server)

--tunnel-refresh duration
            Interval in seconds between two tunnel refresh. Refreshing tunnels
            mean :
            - killing all dead tunnels ( detected via the ping-exit option
            if openvpn )
            - killing the 'worst' tunnels, so that at least the ratio of
            tunnels set by the --refresh-rate option have been killed
            - creating new tunnels to other clients randomly choosen in the
            peers database, to reach the number of connection specified by
            the connection-count option ( There can be less tunnels if the
            peers DB does not contain enough peers )
            Default : 300

--connection-count number
            The maximum number of openvpn clients to start.
            Default : 20

--refresh-rate ratio
            The ratio of connection to kill each time we refresh tunnels.
            For more information see the --tunnel-refresh option
            ratio should be a float between 0 and 1 ( included )
            Default : 0.05

Openvpn-options
---------------

-- openvpn_args
            Additional arguments to be passed down to all openvpn processes
            can be given at the end of the command line.
            In that case, insert '--' to delimit re6stnet regular options
            from the additional openvpn arguments. The list of arguments will
            be passed down to ALL openvpn processes ( including servers )
            exactly as they are given.

SEE ALSO
========

``re6st-conf``\ (1), ``re6st-registry``\ (1), ``babeld``\ (8), ``openvpn``\ (8)
